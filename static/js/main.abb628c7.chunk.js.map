{"version":3,"sources":["utils/firebase.js","components/loading/index.js","components/form/index.js","utils/sound.js","components/chart/index.js","components/app.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","add","a","age","frequency","collection","get","then","stream","forEach","result","doc","push","id","ids","data","map","source","Promise","all","e","x","className","Form","useState","targets","form","setValue","state","setState","save","value","name","defaultValue","onChange","target","disabled","Array","fill","i","key","onClick","type","soundFunctions","timeIntervalId","context","AudioContext","o","createOscillator","g","createGain","connect","destination","start","frequencyStart","time","increase","listener","event","setInterval","clearInterval","stop","colors","Chart","width","height","margin","top","right","bottom","left","dataKey","unit","cursor","strokeDasharray","entry","index","length","App","update","chart","setChartState","intData","parseInt","href","sound","ReactGA","initialize","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.abb628c7.chunk.js","sourcesContent":["import firebase from 'firebase';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAAgH9oVPY07f4W64q3zBIqosBVH3Irfp0',\n  authDomain: 'knight-bus.firebaseapp.com',\n  databaseURL: 'https://knight-bus.firebaseio.com',\n  projectId: 'knight-bus',\n  storageBucket: 'knight-bus.appspot.com',\n  messagingSenderId: '699821551493',\n  appId: '1:699821551493:web:a944b29b62db1445',\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\n\nexport const add = async ({ age, frequency }) => {\n  await db.collection('frequency').add({ age, frequency });\n};\n\nexport const get = async () => {\n  const ids = await db.collection('frequency').get().then((stream) => {\n    if (stream.forEach) {\n      const result = [];\n      stream.forEach((doc) => result.push(doc.id));\n      return result;\n    }\n\n    return stream;\n  });\n\n  const data = ids.map((id) => db.collection('frequency').doc(id).get({ source: 'cache' }));\n  return Promise.all(data).then((e) => e.map((x) => x.data()));\n};\n\nexport default { add };\n","import React from 'react';\nimport './loading.css';\n\nexport default () => <div className=\"lds-dual-ring\" />;\n","import React, { useState } from 'react';\nimport { add } from '../../utils/firebase';\nimport './form.css';\nimport Loading from '../loading';\n\nconst Form = () => {\n  const [form, setValue] = useState({ age: null, frequency: null, targets: [] });\n  const [state, setState] = useState();\n  const reset = () => form.targets.forEach((e) => { e.value = ''; });\n  const save = async () => {\n    if (form.age && form.frequency) {\n      setState('loading');\n      await add(form);\n      setState('success');\n      reset();\n    }\n  };\n\n  return (\n    <>\n      <div className=\"row\">\n        <select\n          name=\"age\"\n          defaultValue=\"\"\n          onChange={(e) => {\n            form.targets[0] = e.target;\n            setValue({ ...form, age: e.target.value });\n          }}\n        >\n          <option disabled value=\"\">Qual a sua idade?</option>\n          {new Array(110)\n            .fill(0)\n            .map((x, i) => (\n              <option key={`age-${x + i}`} value={i + 1}>\n                {i + 1}\n              </option>\n            ))}\n        </select>\n\n        <select\n          defaultValue=\"\"\n          onChange={(e) => {\n            form.targets[1] = e.target;\n            setValue({ ...form, frequency: e.target.value });\n          }}\n          name=\"frequency\"\n        >\n          <option disabled value=\"\">Em qual frequencia você parou?</option>\n          {new Array(18)\n            .fill(0)\n            .map((x, i) => (\n              <option key={`frequency-${x + i}`} value={5000 + (i * 1000)}>\n                {5000 + (i * 1000)}\n                {' '}\n                Hz\n              </option>\n            ))}\n        </select>\n\n        <button onClick={save} type=\"button\">\n          {state === 'loading' ? <Loading /> : 'Salvar'}\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default Form;\n","const soundFunctions = (() => {\n  const context = new AudioContext();\n  let o = context.createOscillator();\n  let g = context.createGain();\n\n  o.connect(g);\n  g.connect(context.destination);\n\n  let timeIntervalId;\n\n  const start = ({\n    frequencyStart = 5000, time = 2000, increase = 1000,\n    listener,\n  }) => {\n    o.start();\n    o.frequency.value = frequencyStart;\n\n    listener({ event: 'start', frequency: o.frequency.value });\n\n    timeIntervalId = setInterval(() => {\n      o.frequency.value += increase;\n      listener({ event: 'update', frequency: o.frequency.value });\n\n      if (o.frequency.value > 21000) {\n        clearInterval(timeIntervalId);\n        listener({ event: 'stop', frequency: o.frequency.value });\n      }\n    }, time);\n  };\n\n  const stop = () => {\n    o.stop();\n\n    o = context.createOscillator();\n    g = context.createGain();\n    o.connect(g);\n    g.connect(context.destination);\n\n    clearInterval(timeIntervalId);\n  };\n\n  return { start, stop };\n})();\n\nexport default soundFunctions;\n","import React from 'react';\nimport {\n  ScatterChart, Scatter, Cell, XAxis, YAxis, CartesianGrid, Tooltip,\n} from 'recharts';\n\nconst colors = ['red', 'green', 'pink', 'yellow'];\n\nconst Chart = ({ data }) => (\n  <ScatterChart\n    width={600}\n    height={500}\n    margin={{\n      top: 20, right: 20, bottom: 20, left: 20,\n    }}\n  >\n    <XAxis type=\"number\" dataKey=\"age\" name=\"Idade\" unit=\" anos\" />\n    <YAxis type=\"number\" dataKey=\"frequency\" name=\"Frequencia\" unit=\" Hz\" />\n    <CartesianGrid />\n    <Tooltip cursor={{ strokeDasharray: '3 3' }} />\n    <Scatter name=\"A school\" data={data} fill=\"#8884d8\">\n      {\n        data.map((entry, index) => (\n          <Cell\n            key={`cell-${entry}`}\n            fill={colors[index % colors.length]}\n          />\n        ))\n      }\n    </Scatter>\n  </ScatterChart>\n);\n\nexport default Chart;\n","import React, { useState } from 'react';\nimport Form from './form';\nimport sound from '../utils/sound';\nimport Chart from './chart';\nimport { get } from '../utils/firebase';\nimport '../main.css';\n\nconst App = () => {\n  const [event, update] = useState({ frequency: 0 });\n  const [chart, setChartState] = useState([]);\n  const start = () => {\n    sound.start({ listener: update });\n  };\n\n  if (!chart.length) {\n    get().then((data) => {\n      const intData = data.map((e) => ({\n        ...e,\n        age: parseInt(e.age, 10),\n        frequency: parseInt(e.frequency, 10),\n      }));\n\n      setChartState(intData);\n    });\n  }\n\n  return (\n    <>\n      <h1 className=\"title\">Perdendo audição</h1>\n      <span className=\"info\">\n        Para mais informações assista esse video\n        {' '}\n        <a href=\"https://www.youtube.com/watch?v=uoxtAXN2tnI\">aqui</a>\n      </span>\n\n      <div className=\"frequency\">\n        {event.frequency}\n        {' '}\n        Hz\n      </div>\n\n      <div className=\"controls\">\n        <button type=\"button\" onClick={start}>Iniciar</button>\n        <button type=\"button\" onClick={sound.stop}>Parar</button>\n      </div>\n\n      <div className=\"form\">\n        <h3 className=\"title\">Até que frequência você escuta?</h3>\n        <Form />\n      </div>\n\n      <div className=\"chart\">\n        <div>\n          {chart.length ? <Chart data={chart} /> : null}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactGA from 'react-ga';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\n\nReactGA.initialize('UA-146904576-1');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}